4 lines:
1) x=r_q
2) y=c_q
3) y-c_q=x-r_q
4) x+y=r_q+c_q

Starting limits:
1) x in (0, n+1)
2) y in (0, n+1)
3) x in (max(0, x-y), n+1-max(0, y-x))
4) x in (max(0, x+y-(n+1)), min(n+1, x+y))

Obstacles:
for each obstacle:
 > for each line:
    > if obstacle lies on the line:
	> update line limit (upper or lower)